export const clients = [
  { client: "Juan Pérez" },
  { client: "María González" },
  { client: "Carlos Sánchez" },
  { client: "Laura Rodríguez" },
  { client: "José Martínez" },
  { client: "Ana López" },
  { client: "Pedro García" },
  { client: "Isabel Hernández" },
  { client: "Luis Fernández" },
  { client: "Carmen Díaz" },
  { client: "Antonio Gómez" },
  { client: "Beatriz Romero" },
  { client: "Javier Ruiz" },
  { client: "Teresa Morales" },
  { client: "Francisco Jiménez" },
];

const dishes = [
  {
    name: "Ceviche",
    price: 6.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_1_gdefbp.png",
    description:
      "Un plato fresco y cítrico con pescado crudo marinado en jugo de limón y especias.",
  },
  {
    name: "Lomo Saltado",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_2_knqorn.png",
    description:
      "Un delicioso salteado de carne de res, papas y cebollas, acompañado de arroz.",
  },
  {
    name: "Aji de Gallina",
    price: 6.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_3_lzk7yz.png",
    description:
      "Un guiso cremoso y picante de pollo desmenuzado con una salsa de ají amarillo.",
  },
  {
    name: "Pachamanca",
    price: 8.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314052/orders%20manager/dishes/Frame_4_hc3fve.png",
    description:
      "Carne, papas y maíz cocinados al estilo tradicional andino, bajo tierra.",
  },
  {
    name: "Arroz con Pollo",
    price: 5.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314052/orders%20manager/dishes/Frame_5_n1muxd.png",
    description:
      "Un plato clásico con arroz, pollo y especias, preparado con hierbas frescas.",
  },
  {
    name: "Sancochado",
    price: 7.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_6_xnsy3i.png",
    description:
      "Sopa espesa con carne, vegetales y tubérculos, tradicionalmente servida con arroz.",
  },
  {
    name: "Chicharrón de chancho",
    price: 6.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_7_vzufsh.png",
    description:
      "Crujientes trozos de cerdo fritos, servidos con una salsa o ensalada fresca.",
  },
  {
    name: "Sopa a la Minuta",
    price: 4.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314051/orders%20manager/dishes/Frame_8_inhvqo.png",
    description: "Una sopa ligera con carne picada, vegetales y arroz.",
  },
  {
    name: "Frejoles con Seco",
    price: 6.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314052/orders%20manager/dishes/Frame_9_iyprs4.png",
    description:
      "Frijoles acompañados de carne de res guisada con especias, generalmente servido con arroz.",
  },
  {
    name: "Sudado de Pescado",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314052/orders%20manager/dishes/Frame_10_sdbybw.png",
    description:
      "Plato de pescado cocido al vapor con cebollas, tomates y especias.",
  },
  {
    name: "Tallarín Saltado",
    price: 6.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314052/orders%20manager/dishes/Frame_11_mo2y6h.png",
    description:
      "Fideos salteados con carne, verduras y salsa de soya, al estilo chino-peruano.",
  },
];

const drinks = [
  {
    name: "Vaso de Chicha Morada",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314114/orders%20manager/drinks/Frame_17_wq2gqr.png",
  },
  {
    name: "Jarra de Chicha Morada",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314116/orders%20manager/drinks/Frame_18_v8ffza.png",
  },
  {
    name: "Vaso de maracuyá",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314114/orders%20manager/drinks/Frame_19_ink3nb.png",
  },
  {
    name: "Jarra de Maracuyá",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314115/orders%20manager/drinks/Frame_20_sjtk3u.png",
  },
  {
    name: "Vaso de limonada",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314114/orders%20manager/drinks/Frame_21_oug6mp.png",
  },
  {
    name: "Jarra de limonada",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314117/orders%20manager/drinks/Frame_22_gtvlpv.png",
  },
  {
    name: "Vaso de naranjada",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314115/orders%20manager/drinks/Frame_23_wlgnyf.png",
  },
  {
    name: "Jarra de naranjada",
    price: 7.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314115/orders%20manager/drinks/Frame_24_hjml0j.png",
  },
  {
    name: "Inca Kola personal",
    price: 1.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314117/orders%20manager/drinks/Frame_25_tamziq.png",
  },
  {
    name: "Inca Kola 1.5l",

    price: 4.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314116/orders%20manager/drinks/Frame_26_rzkshx.png",
  },
];

const desserts = [
  {
    name: "Picarones",
    price: 3.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314088/orders%20manager/desserts/Frame_12_rdjzux.png",
    description: "Donas fritas hechas con zapallo, acompañadas de miel.",
  },
  {
    name: "Leche Asada",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314088/orders%20manager/desserts/Frame_13_fqmpfv.png",
    description:
      "Postre cremoso de leche, huevo y vainilla, similar a un flan.",
  },
  {
    name: "Mazamorra Morada",
    price: 2.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314089/orders%20manager/desserts/Frame_14_tpur40.png",
    description: "Postre a base de maíz morado, azúcar y frutas.",
  },
  {
    name: "Arroz con Leche",
    price: 2.0,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314089/orders%20manager/desserts/Frame_15_x7ephl.png",
    description: "Arroz cremoso con leche, azúcar y canela.",
  },
  {
    name: "Suspiro a la Limeña",
    price: 2.5,
    image:
      "https://res.cloudinary.com/dvvwfb2tr/image/upload/v1735314088/orders%20manager/desserts/Frame_16_qdwzn7.png",
    description: "Crema suave de manjar blanco con merengue.",
  },
];

export const generateOrder = (orderId: number | null) => {
  // Seleccionar un cliente aleatorio
  const randomClient = clients[Math.floor(Math.random() * clients.length)];

  // Seleccionar un item aleatorio
  const getRandomItem = (array: any[]) => {
    const randomIndex = Math.floor(Math.random() * array.length);
    return array[randomIndex];
  };

  // Seleccionar entre 1 y 3 elementos de cada tipo (dishes, drinks, desserts)
  const getRandomItems = (array: any[], maxItems: number) => {
    const numItems = Math.floor(Math.random() * maxItems) + 1; // entre 1 y maxItems
    const items = [];

    for (let i = 0; i < numItems; i++) {
      const item = getRandomItem(array);
      const quantity = Math.floor(Math.random() * 3) + 1; // Generar una cantidad aleatoria entre 1 y 3

      // Verificar si el item ya existe en el arreglo, si existe, aumentamos la cantidad
      const existingItemIndex = items.findIndex((i) => i.name === item.name);
      if (existingItemIndex !== -1) {
        items[existingItemIndex].quantity += quantity; // Aumentar la cantidad del item existente
      } else {
        items.push({
          name: item.name,
          desc: item.description || "",
          price: item.price,
          quantity,
          image: item.image,
        });
      }
    }

    return items;
  };

  // Combina todos los items seleccionados
  const items = [
    ...getRandomItems(dishes, 2),
    ...getRandomItems(drinks, 2),
    ...getRandomItems(desserts, 2),
  ];

  // Calcular el subtotal
  const subtotal = items.reduce(
    (acc, item) => acc + item.price * item.quantity,
    0
  );

  // Calcular el total con impuestos y descuento (en este caso el descuento es 0)
  const discount = 0;
  const taxRate = 0.1;
  const total = subtotal + subtotal * taxRate - discount;

  // Crear la estructura de la orden
  const order = {
    id: orderId,
    time: new Date().toISOString(),
    client: randomClient.client,
    status: "started",
    items,
    subtotal,
    total,
    discount,
    taxRate,
  };

  return order;
};

export const generateRandomOrders = async () => {
  // Generar un número aleatorio entre 1 y 20
  const numOrders = Math.floor(Math.random() * 20) + 1;

  const orders: any[] = [];

  const delay = (ms: number) =>
    new Promise((resolve) => setTimeout(resolve, ms));

  for (let i = 0; i < numOrders; i++) {
    const order = generateOrder(null);
    orders.push(order);

    await delay(20);
  }

  return orders;
};
